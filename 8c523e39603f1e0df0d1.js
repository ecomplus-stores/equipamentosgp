(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{334:function(e,t,o){"use strict";o.r(t);o(13);var c=o(77),n=o(25),r=o(20),a=o(37);const s=n.$ecomConfig.get("currency")||"BRL",u=e=>{const t={name:Object(r.a)(e),id:e.sku,price:Object(a.a)(e).toFixed(2)};return e.quantity&&(t.quantity=e.quantity),t};var i=o(15);t.default=(e={})=>{const{dataLayerVar:t,parseDomMsDelay:o}=e,n=window[t]||window.dataLayer;n&&((e=>{const t=window.storefront&&window.storefront.context;if(t&&"products"===t.resource){const{body:o}=t,n=u(o),r={event:"eec.detail",ecommerce:{currencyCode:s,detail:{products:[n]}}},a=Object(c.a)(o);a.length&&(n.category=o.category_tree?o.category_tree.replace(/\s>\s/g,"/"):a[0],r.ecommerce.detail.actionField={list:a[0]}),o.brands&&o.brands.length&&(n.brand=o.brands[0].name),e.push(r)}})(n),(e=>{const t=window.storefrontApp&&window.storefrontApp.router;if(t){let o,c,n;const r=()=>{const e=[];return i.a.data&&Array.isArray(i.a.data.items)&&i.a.data.items.forEach(t=>{e.push(u(t))}),e},a=(t,n)=>{const a={step:t,option:n};t<=1||!o?(e.push({event:"eec.checkout",ecommerce:{currencyCode:s,checkout:{actionField:a,products:r()}}}),e.push({event:"checkout"}),o=!0):c||(e.push({event:"eec.checkout_option",ecommerce:{currencyCode:s,checkout_option:{actionField:a}}}),e.push({event:"checkoutOption"}),c=!0)},d=t=>{if(!n){const{amount:o}=window.storefrontApp,c=(o&&o.total||i.a.data&&i.a.data.subtotal||0).toFixed(2);e.push({event:"eec.purchase",ecommerce:{currencyCode:s,purchase:{actionField:{id:t,revenue:c},products:r()}}}),n=!0}},p=({name:e,params:t})=>{switch(e){case"cart":a(1,"Review Cart");break;case"checkout":a(2,"Confirm Purchase");break;case"confirmation":d(t.id)}};t.currentRoute&&p(t.currentRoute),t.afterEach(p)}})(n),(e=>{const t={},o=o=>{const c=u(o);e.push({event:"eec.add",ecommerce:{currencyCode:s,add:{products:[c]}}}),e.push({event:"addToCart"}),t[o.sku]=c},c=o=>{const c=t[o.sku];e.push({event:"eec.remove",ecommerce:{currencyCode:s,remove:{products:[c?Object.assign({},c):u(o)]}}}),e.push({event:"removeFromCart"}),delete t[o.sku]};i.a.on("addItem",({item:e})=>o(e)),i.a.on("increaseItemQnt",({item:e})=>{const n=t[e.sku];if(n){const t=e.quantity-n.quantity;t>0?o({...e,quantity:t}):c({...e,quantity:-t})}else o(e)}),i.a.on("removeItem",({item:e})=>c(e)),i.a.on("clear",()=>{for(const e in t)t[e]&&c(t[e])})})(n),setTimeout(()=>{(e=>{const t=document.querySelectorAll("[data-sku]");if(t.length){const o=[],c={},n="/search"===window.location.pathname;for(let e=0;e<t.length;e++){const r=t[e],{sku:a}=r.dataset;if(-1===o.indexOf(a)&&(o.push(a),r.closest)){const e=r.closest(".products-carousel");!n&&e&&(c[a]=e.dataset.title)}}e.push({event:"eec.impressions",ecommerce:{currencyCode:s,impressions:o.map(e=>{const t=n?"Search results":c[e],o={id:e};return t&&(o.list=t),o})}})}})(n)},o>=0?o:300))}}}]);
//# sourceMappingURL=8c523e39603f1e0df0d1.js.map